"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/common.js");if(!Array){(e.resolveComponent("uni-load-more")+e.resolveComponent("soup-item")+e.resolveComponent("z-paging"))()}Math||((()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js")+(()=>"../soup-item/soup-item.js")+(()=>"../../uni_modules/z-paging/components/z-paging/z-paging.js"))();const o={__name:"soup-list",props:{tabIndex:{type:Number,default:function(){return 0}},currentIndex:{type:Number,default:function(){return 0}}},setup(o){const n=e.ref([]),u=e.ref(null),a=e.Vs.database(),s=e.ref(!1);function d(e,o){!async function(e,o){let n=(e-1)*o,{result:{data:d,errCode:r}}=await a.collection("soup-chicken").where(`status==${t.stateLists[i.tabIndex].value} && is_delete !=true`).field("publish_date,last_modify_date,content,soup_type,like_count,collect_count,comment_count,status").orderBy("last_modify_date","desc").skip(n).limit(o).get();if(0!=r)return;s.value=!0,u.value.complete(d)}(e,o)}const i=o;function r(){u.value.refresh()}return e.watch((()=>i.currentIndex),((t,o)=>{t==i.tabIndex&&(s.value||e.nextTick$1((()=>{setTimeout((()=>{u.value.reload()}),100)})))}),{immediate:!0}),(t,o)=>({a:e.p({status:"loading"}),b:e.f(n.value,((t,o,n)=>({a:e.o(r,t._id),b:"fdfddb45-2-"+n+",fdfddb45-0",c:e.p({item:t}),d:t._id}))),c:e.sr(u,"fdfddb45-0",{k:"paging"}),d:e.o(d),e:e.o((e=>n.value=e)),f:e.p({auto:!1,modelValue:n.value})})}},n=e._export_sfc(o,[["__scopeId","data-v-fdfddb45"]]);wx.createComponent(n);
