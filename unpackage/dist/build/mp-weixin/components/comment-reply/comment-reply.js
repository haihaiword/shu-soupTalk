"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/user.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const o={__name:"comment-reply",props:{source:{type:Object,default:()=>({})}},emits:["success"],setup(o,{expose:n,emit:s}){const c=t.useUserStore(),a=e.Vs.importObject("secCheckContent",{customUI:!0}),r=e.Vs.database(),u=e.ref({comment_content:""}),l=o,m=e.ref(!1),i=s,p=async()=>{e.index.showLoading();let{reply_user_name:t,...o}=u.value,n=await a.textSecCheck(u.value.comment_content,c.userInfo.openid);if(n.code)return e.index.hideLoading(),void e.index.showModal({title:n.errMsg,content:`发布内容存在"${n.result.label}"问题,请重新编辑后发布!`,showCancel:!1});let s=await r.collection("soup-comments").add(o);u.value.comment_content="",i("success"),console.log(s)};return n({focuFn:()=>{m.value=!1,e.nextTick$1((()=>{m.value=!0,u.value={...u.value,...l.source}}))}}),(t,o)=>({a:e.o(p),b:m.value,c:u.value.reply_user_name?"回复:"+u.value.reply_user_name:"请输入评论内容",d:u.value.comment_content,e:e.o((e=>u.value.comment_content=e.detail.value)),f:e.p({type:"paperplane",size:"26",color:"#333"}),g:e.o(p)})}},n=e._export_sfc(o,[["__scopeId","data-v-a2ff1cb4"]]);wx.createComponent(n);
