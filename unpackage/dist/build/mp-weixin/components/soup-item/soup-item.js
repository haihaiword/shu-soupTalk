"use strict";const t=require("../../common/vendor.js"),e=require("../../utils/common.js");if(!Array){(t.resolveComponent("soup-tab-group")+t.resolveComponent("uni-icons")+t.resolveComponent("uni-dateformat"))()}Math||((()=>"../soup-tab-group/soup-tab-group.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js"))();const o={__name:"soup-item",props:{item:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!0}},emits:["remove"],setup(o,{emit:i}){const a=t.Vs.database(),s=i,{proxy:n}=t.getCurrentInstance(),u=o,m=t.computed((()=>e.stateFormat(u.item.status))),c=()=>{u.isEdit&&t.index.navigateTo({url:"/pages_self/soup/edit?id="+u.item._id})},r=()=>{console.log("跳转详情"),t.index.navigateTo({url:"/pages/detail/detail?id="+u.item._id})};return(i,u)=>t.e({a:t.p({type:o.item.soup_type}),b:t.p({type:"eye",size:"18",color:"#999"}),c:t.o(r),d:t.t(o.item.content),e:t.p({date:o.item.publish_date,format:"yyyy-MM-dd hh:mm"}),f:1==t.unref(e.stateFormat)(o.item.status).value},1==t.unref(e.stateFormat)(o.item.status).value?t.e({g:t.p({type:"heart",color:"#a7a7a7",size:"16"}),h:o.item.like_count},o.item.like_count?{i:t.t(o.item.like_count)}:{},{j:t.p({type:"star",color:"#a7a7a7",size:"16"}),k:o.item.collect_count},o.item.collect_count?{l:t.t(o.item.collect_count)}:{},{m:t.p({type:"chatbubble",color:"#a7a7a7",size:"16"}),n:o.item.comment_count},o.item.comment_count?{o:t.t(o.item.comment_count)}:{}):t.e({p:t.t(m.value.text),q:2==o.item.status},2==o.item.status?{r:t.p({type:"trash",size:"16"}),s:t.o((e=>(async e=>{if((await t.index.showModal({title:"是否删除这条信息",content:"删除后无法恢复！"})).confirm){let{result:{errCode:t}}=await a.collection("soup-chicken").where(`_id=="${e}"`).update({is_delete:!0});if(0!=t)return n.showToast("修改失败请重新操作");n.showToast("删除成功！"),s("remove")}})(o.item._id)))}:{},{t:m.value.color}),{v:t.o(c)})}},i=t._export_sfc(o,[["__scopeId","data-v-24df124f"]]);wx.createComponent(i);
