"use strict";const e=require("../../common/vendor.js"),o=require("../../common/assets.js"),r=require("../../utils/system.js"),s=require("../../stores/user.js"),t=require("../../utils/tools.js"),i=require("../../utils/common.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const l={__name:"self",setup(l){const u=s.useUserStore(),c=e.Vs.database(),n=e.ref({soup:0,like:0,scores:0});return(async()=>{let e=c.collection("soup-chicken").where("user_id == $cloudEnv_uid && status==1").count(),o=c.collection("soup-like").where("user_id == $cloudEnv_uid").count(),r=c.collection("soup-scores").where("user_id ==  $cloudEnv_uid").orderBy("create_date","desc").limit(1).get({getOne:!0});Promise.all([e,o,r]).then((e=>{var o,r;console.log(e),n.value.soup=e[0].result.total,n.value.like=e[1].result.total,n.value.scores=(null==(r=null==(o=e[2].result)?void 0:o.data)?void 0:r.balance)??0}))})(),(s,l)=>e.e({a:e.unref(r.getNavBarHeight)()+"px",b:e.unref(u).userInfo.avatar},e.unref(u).userInfo.avatar?{c:e.unref(u).userInfo.avatar}:{d:o._imports_0$1},{e:e.t(e.unref(t.truncateString)(e.unref(u).userInfo.username,7)),f:e.t(e.unref(t.daysFromTimestamp)(e.unref(u).userInfo.register_date)),g:e.p({type:"right",size:"18",color:"#999"}),h:e.p({"custom-prefix":"iconfont",type:"xxm-highlight-fill",size:"18",color:"#fff"}),i:e.t(n.value.soup),j:e.p({type:"right",size:"18",color:"#999"}),k:e.unref(i.isAdminRole)()},e.unref(i.isAdminRole)()?{l:e.p({"custom-prefix":"iconfont",type:"xxm-edit-fill",size:"18",color:"#fff"}),m:e.p({type:"right",size:"18",color:"#999"})}:{},{n:e.p({"custom-prefix":"iconfont",type:"xxm-star-fill",size:"18",color:"#fff"}),o:e.t(n.value.like),p:e.p({type:"right",size:"18",color:"#999"}),q:e.p({type:"pyq",color:"#fff",size:"18"}),r:e.p({type:"right",size:"22",color:"#999"}),s:e.p({"custom-prefix":"iconfont",type:"xxm-hourglass-fill",size:"18",color:"#fff"}),t:e.t(n.value.scores),v:e.p({type:"right",size:"22",color:"#999"}),w:e.p({"custom-prefix":"iconfont",type:"xxm-message-fill",size:"18",color:"#fff"}),x:e.p({type:"right",size:"22",color:"#999"})})}},u=e._export_sfc(l,[["__scopeId","data-v-fbc3fcd1"]]);wx.createPage(u);
